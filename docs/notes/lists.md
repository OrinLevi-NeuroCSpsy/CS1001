# רשימות (Lists) - סיכום לבחינה

---

## הגדרה פורמלית

**רשימה (List)** היא מבנה נתונים סדרתי (Sequence) ומשתנה (Mutable) המאחסן אוסף של איברים בסדר מוגדר.

```python
my_list = [element1, element2, element3, ...]
```

### מאפיינים
| מאפיין | ערך |
|--------|-----|
| סדר | כן - לאיברים יש אינדקסים |
| שינוי (Mutable) | כן - ניתן לשנות אחרי יצירה |
| כפילויות | מותר |
| טיפוסים | מעורב - ניתן לערבב טיפוסים |

---

## הסבר אינטואיטיבי

רשימה היא כמו שורה של תאים ממוספרים. כל תא מכיל ערך, וניתן לגשת לכל תא לפי מספרו (אינדקס).

```
אינדקס:    0      1      2      3      4
         +------+------+------+------+------+
ערך:     |  10  |  20  |  30  |  40  |  50  |
         +------+------+------+------+------+
אינדקס:   -5     -4     -3     -2     -1
שלילי
```

---

## יצירת רשימות

```python
# רשימה ריקה
empty = []
empty = list()

# רשימה עם ערכים
numbers = [1, 2, 3, 4, 5]
names = ["דני", "רוני", "יוסי"]
mixed = [1, "hello", 3.14, True]  # טיפוסים מעורבים

# רשימה מקוננת
matrix = [[1, 2], [3, 4], [5, 6]]

# יצירה מטווח
nums = list(range(5))      # [0, 1, 2, 3, 4]
nums = list(range(1, 6))   # [1, 2, 3, 4, 5]
```

---

## גישה לאיברים (Indexing)

### אינדקס חיובי (מההתחלה)
```python
lst = ['a', 'b', 'c', 'd', 'e']
lst[0]   # 'a' - איבר ראשון
lst[2]   # 'c' - איבר שלישי
lst[4]   # 'e' - איבר אחרון
```

### אינדקס שלילי (מהסוף)
```python
lst[-1]  # 'e' - אחרון
lst[-2]  # 'd' - לפני אחרון
lst[-5]  # 'a' - ראשון
```

### חריגה מטווח
```python
lst[10]   # IndexError: list index out of range
lst[-10]  # IndexError
```

---

## חיתוך (Slicing)

### תחביר: `lst[start:stop:step]`

```python
lst = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

# בסיסי (start:stop)
lst[2:5]    # [2, 3, 4] - מ-2 עד 5 (לא כולל)
lst[:4]     # [0, 1, 2, 3] - מההתחלה עד 4
lst[6:]     # [6, 7, 8, 9] - מ-6 עד הסוף
lst[:]      # [0, 1, 2, ...] - העתק של כל הרשימה

# עם צעד (step)
lst[::2]    # [0, 2, 4, 6, 8] - כל איבר שני
lst[1::2]   # [1, 3, 5, 7, 9] - איברים במקום אי-זוגי
lst[::-1]   # [9, 8, 7, ...] - הפוך

# אינדקסים שליליים
lst[-3:]    # [7, 8, 9] - 3 אחרונים
lst[:-2]    # [0, 1, ..., 7] - הכל חוץ מ-2 אחרונים
```

> **כלל חשוב:** `start` נכלל, `stop` **לא** נכלל!

---

## שינוי רשימות

### שינוי איבר בודד
```python
lst = [1, 2, 3]
lst[1] = 20
# lst = [1, 20, 3]
```

### שינוי טווח
```python
lst = [1, 2, 3, 4, 5]
lst[1:4] = [20, 30]
# lst = [1, 20, 30, 5]
```

---

## פעולות על רשימות

### אופרטורים

```python
# שרשור (+)
[1, 2] + [3, 4]      # [1, 2, 3, 4]

# כפל (*)
[0] * 5              # [0, 0, 0, 0, 0]
[1, 2] * 3           # [1, 2, 1, 2, 1, 2]

# השוואה
[1, 2] == [1, 2]     # True
[1, 2] == [2, 1]     # False (סדר חשוב!)

# שייכות (in)
3 in [1, 2, 3]       # True
5 in [1, 2, 3]       # False
```

### פונקציות מובנות

```python
lst = [3, 1, 4, 1, 5, 9]

len(lst)        # 6 - אורך
min(lst)        # 1 - מינימום
max(lst)        # 9 - מקסימום
sum(lst)        # 23 - סכום
sorted(lst)     # [1, 1, 3, 4, 5, 9] - רשימה ממוינת חדשה
```

---

## מתודות של רשימות

### הוספת איברים

```python
lst = [1, 2, 3]

# append - הוספה לסוף
lst.append(4)        # [1, 2, 3, 4]

# insert - הוספה במיקום
lst.insert(1, 10)    # [1, 10, 2, 3, 4]

# extend - הוספת רשימה
lst.extend([5, 6])   # [1, 10, 2, 3, 4, 5, 6]
```

### הסרת איברים

```python
lst = [1, 2, 3, 2, 4]

# remove - הסרה לפי ערך (ראשון)
lst.remove(2)        # [1, 3, 2, 4]

# pop - הסרה לפי אינדקס (מחזיר את הערך)
x = lst.pop()        # x=4, lst=[1, 3, 2]
x = lst.pop(0)       # x=1, lst=[3, 2]

# clear - ניקוי הכל
lst.clear()          # []
```

### חיפוש

```python
lst = ['a', 'b', 'c', 'b']

lst.index('b')       # 1 - אינדקס ראשון
lst.index('x')       # ValueError!
lst.count('b')       # 2 - כמה פעמים
```

### מיון והיפוך

```python
lst = [3, 1, 4, 1, 5]

# sort - מיון במקום (משנה את הרשימה)
lst.sort()           # [1, 1, 3, 4, 5]
lst.sort(reverse=True)  # [5, 4, 3, 1, 1]

# reverse - היפוך במקום
lst.reverse()        # [1, 1, 3, 4, 5]
```

### העתקה

```python
lst = [1, 2, 3]

# העתקה רדודה
copy1 = lst.copy()
copy2 = lst[:]
copy3 = list(lst)
```

---

## טבלת מתודות (לשנן!)

| מתודה | פעולה | מחזירה |
|-------|-------|--------|
| `append(x)` | הוסף x לסוף | None |
| `insert(i, x)` | הכנס x במיקום i | None |
| `extend(lst)` | הוסף איברי lst | None |
| `remove(x)` | הסר x ראשון | None |
| `pop(i)` | הסר והחזר איבר i | הערך |
| `pop()` | הסר והחזר אחרון | הערך |
| `index(x)` | מצא אינדקס של x | int |
| `count(x)` | ספור הופעות של x | int |
| `sort()` | מיין במקום | None |
| `reverse()` | הפוך במקום | None |
| `copy()` | העתק רדוד | list |
| `clear()` | רוקן | None |

---

## לולאות על רשימות

```python
lst = ['a', 'b', 'c']

# לולאה על ערכים
for item in lst:
    print(item)

# לולאה על אינדקסים
for i in range(len(lst)):
    print(i, lst[i])

# לולאה על אינדקס וערך (enumerate)
for i, item in enumerate(lst):
    print(i, item)
```

---

## List Comprehension

### תחביר בסיסי
```python
[expression for item in iterable]
```

### דוגמאות
```python
# ריבועים
[x**2 for x in range(5)]         # [0, 1, 4, 9, 16]

# עם תנאי
[x for x in range(10) if x % 2 == 0]  # [0, 2, 4, 6, 8]

# המרה
[s.upper() for s in ['a', 'b']]  # ['A', 'B']
```

---

## טעויות נפוצות

### טעות 1: בלבול בין append ל-extend
```python
lst = [1, 2]
lst.append([3, 4])    # [1, 2, [3, 4]] - רשימה בתוך רשימה!
lst.extend([3, 4])    # [1, 2, 3, 4] - איברים נפרדים
```

### טעות 2: שכחת שמתודות משנות במקום
```python
lst = [3, 1, 2]
result = lst.sort()   # result = None! לא הרשימה הממוינת
lst.sort()            # lst השתנתה במקום
```

### טעות 3: Aliasing - שני שמות לאותה רשימה
```python
a = [1, 2, 3]
b = a           # b מצביע לאותה רשימה!
b.append(4)
print(a)        # [1, 2, 3, 4] - גם a השתנתה!

# נכון - העתקה
b = a.copy()    # או a[:]
```

### טעות 4: שינוי רשימה תוך כדי לולאה
```python
# שגוי!
lst = [1, 2, 3, 4, 5]
for x in lst:
    if x % 2 == 0:
        lst.remove(x)  # מדלג על איברים!

# נכון - לולאה על העתק
for x in lst[:]:
    if x % 2 == 0:
        lst.remove(x)
```

### טעות 5: כפל רשימות עם Mutable
```python
# שגוי!
matrix = [[0] * 3] * 3
matrix[0][0] = 1
# [[1, 0, 0], [1, 0, 0], [1, 0, 0]] - כולם השתנו!

# נכון
matrix = [[0] * 3 for _ in range(3)]
```

---

## שאלות בחינה טיפוסיות

### שאלה 1: מה יודפס?
```python
lst = [1, 2, 3, 4, 5]
print(lst[1:4])
```
**תשובה:** `[2, 3, 4]`

---

### שאלה 2: מה יודפס?
```python
lst = [1, 2, 3]
lst.append([4, 5])
print(len(lst))
```
**תשובה:** `4` (האיבר הרביעי הוא הרשימה [4, 5])

---

### שאלה 3: כתוב פונקציה שמחזירה את האיברים הזוגיים
```python
def get_evens(lst):
    return [x for x in lst if x % 2 == 0]
```

---

### שאלה 4: מה יודפס?
```python
a = [1, 2, 3]
b = a
a.append(4)
print(b)
```
**תשובה:** `[1, 2, 3, 4]` (aliasing!)

---

## סיכום נקודות חשובות

- [ ] אינדקס מתחיל מ-0
- [ ] Slicing: `start` נכלל, `stop` לא
- [ ] `lst[::-1]` - היפוך
- [ ] `append` vs `extend` - איבר בודד מול רשימה
- [ ] מתודות כמו `sort()` מחזירות `None` ומשנות במקום
- [ ] `a = b` יוצר alias, לא העתק
- [ ] לא לשנות רשימה תוך כדי לולאה עליה

---

## קישורים נוספים

- **קוד:** [lists_demo.py](../code/lists_demo.py)
- **שאלות בחינה:** [recursion_and_generators.md](../exam_questions/recursion_and_generators.md)
