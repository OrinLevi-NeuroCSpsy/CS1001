# שאלות מבחן - דחיסה

---

## שאלה 1: בניית עץ האפמן (2023b מועד א', שאלה 3א')

**נתון:**
```python
corpus = 4*'a' + 5*'b' + 6*'c' + 7*'d' + 10*'e' + 15*'f'
```

**שאלה:** בנו את עץ האפמן וקודדו את "fadee".

**פתרון:**
1. בנה עץ מהתדירויות הנמוכות לגבוהות
2. תדירויות: a=4, b=5, c=6, d=7, e=10, f=15

**טריק חשוב:** תמיד ממזגים את שני הצמתים עם התדירות הנמוכה ביותר!

---

## שאלה 2: שחזור עץ האפמן מהודעות (2023b מועד א', שאלה 3ב')

**נתון:**
- 6 אותיות: e, t, a, o, i, n (לפי שכיחות יורדת)
- e מקודדת ב-"0"
- הודעות: 011, 11101, 01011001

**שאלה:** שחזר את עץ האפמן ופענח הודעה ג'.

**טריק חשוב:**
- אם e מקודדת ב-"0", היא בן ישיר של השורש
- ניתן לשחזר את העץ מהודעות תקינות

---

## שאלה 3: Lempel-Ziv - אורך חזרה מינימלי (2023a מועד א', שאלה 1ב')

**נתון:** W=200, L=50 (במקום ברירות המחדל)

**שאלה:** מהו אורך החזרה המינימלי שכדאי לדחוס?

**פתרון:**
- ייצוג ללא דחיסה: 8 ביטים לתו (ASCII)
- ייצוג עם דחיסה: log₂(W) + log₂(L) + 8 = 8 + 6 + 8 = 22 ביטים
- אורך מינימלי: ⌈22/8⌉ = 3 תווים

**טריק חשוב:** השווה עלות דחיסה vs עלות ללא דחיסה!

---

## שאלה 4: האפמן vs LZ (2023b מועד א', שאלה 3ג')

**טענות לבדיקה:**

1. `len(H_compress(s,s)) == len(H_compress(s,s[::-1]))`
   **נכון** - אותן תדירויות, אותם אורכי קודים

2. `len(H_compress(LZ_compress(s), LZ_compress(s))) == len(LZ_compress(s))`
   **נכון** - האפמן על מחרוזת עם עצמה כקורפוס = זהות

3. `len(LZ_compress(H_compress(s, s))) == len(H_compress(s, s))`
   **לא נכון** - LZ יכול לדחוס יותר את הפלט של האפמן (חזרות)

---

## שאלה 5: עץ האפמן מאוזן (2022b מועד א', שאלה 1ו')

**שאלה:** מתי עץ האפמן יהיה מאוזן?

**תשובות:**
- `10*'a' + 10*'b' + 10*'c' + 10*'d'` → **מאוזן** (תדירויות שוות)
- `10*'a' + 5*'b' + 15*'c' + 16*'d'` → **לא מאוזן**
- תדירויות שהן חזקות של 2 → תלוי מימוש

---

## שאלה 6: קוד האפמן עם 128 תווים (2024a מועד א', שאלה 1ה')

**נתון:** קורפוס עם 128 תווים שונים, שכיחויות a₁ < a₂ < ... < aₙ כאשר aₙ < 2·a₁

**שאלה:** מה ההפרש בין אורך הקידוד של התו בעל השכיחות הנמוכה ביותר (l) לבין אורך הקידוד של התו בעל השכיחות הגבוהה ביותר (u)?

**תשובה:** l - u = 1

**הסבר:** כאשר aₙ < 2·a₁, ההבדל בין השכיחויות לא גדול מספיק כדי שיהיה הבדל של יותר מ-1 בין אורכי הקידודים.

---

## שאלה 7: Lempel-Ziv עם פרמטרים (2024a מועד א', שאלה 1ו')

**נתון:** דוחסים "abcdab" עם W = 2¹⁰-1, L = 2³-1

**שאלה:** כמה ביטים במחרוזת הדחוסה?

**פתרון:**
- אורך ייצוג חזרה: log₂(W) + log₂(L) + 1 = 10 + 3 + 1 = 14 ביטים
- תו לא דחוס: 8 ביטים
- "ab" בהתחלה: 2×8 = 16 ביטים
- "cd": 2×8 = 16 ביטים
- "ab" חוזר? אורך 2, צריך 14 ביטים לחזרה vs 16 לתווים - כדאי לדחוס!

**תשובה:** 16 + 16 + 14 = 46 ביטים (או פתרון אחר לפי פרשנות)

---

## שאלה 8: Prefix-Free Codes (2025a מועד א', שאלה 1ב')

**נתון:** א"ב {a, b, c, d} וחמישה קידודים

| קידוד | סוג |
|-------|------|
| a=0, b=00, c=000, d=0000 | not uniquely decodable |
| a=00, b=01, c=10, d=11 | prefix free |
| a=00, b=01, c=101, d=110 | prefix free |
| a=10, b=101, c=1011, d=11 | uniquely decodable but not prefix free |
| a=0, b=01, c=011, d=0111 | not uniquely decodable |

**טריק חשוב:** קוד הוא prefix-free אם אף מילת קוד אינה רישא של אחרת!

---

## שאלה 9: Lempel-Ziv עם חזרות לאחור (2025a מועד א', שאלה 3)

**רעיון חדש:** מאפשרים חזרות "לאחור" - אם היה "abc" ובהמשך "cba", ניתן לקודד את "cba" כחזרה לאחור.

**ייצוג חזרה:** [m, k, b] כאשר:
- m = היסט לאחור
- k = אורך חזרה
- b = 0 אם חזרה רגילה, 1 אם חזרה לאחור

**דוגמאות:**
- "abcdeabcde" → ["a", "b", "c", "d", "e", [5,5,0]]
- "abcdeedcba" → ["a", "b", "c", "d", "e", [1,5,1]]

**אורך חזרה מינימלי:** 3 (כי חזרה = 19 ביטים, 3 תווים = 24 ביטים)

---

## שאלה 10: דחיסת מחרוזות באורך 2 (2024a מועד ב', שאלה 4)

**רעיון:** במקום קידוד תו בודד, מקודדים זוגות תווים (מחרוזות באורך 2)

```python
def compress_pairs(text, pairhcode):
    return "".join([pairhcode[text[i:i+2]] for i in range(0,len(text),2)])
```

**שאלות:**
1. האם `len(compress(s,hcode)) == len(compress(s[::-1],hcode))`? **כן** - אותן תדירויות
2. האם `len(compress_pairs(s,pairhcode)) == len(compress_pairs(s[::-1],pairhcode))`? **לא** - זוגות שונים!

**דוגמה:** "ab" הפוך הוא "ba", אבל "ab" ו-"ba" הם זוגות שונים עם קידודים שונים.

---

## קישורים לסיכומים

- [דחיסה](../notes/compression.md)
- [טריקים לבחינה](../notes/exam_tricks.md)
